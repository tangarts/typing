(ns typing.components.percentile)

(def population-speeds {
 "0" 0,
 "10" 0,
 "20" 0,
 "30" 0.1,
 "40" 0.2,
 "50" 0.6,
 "60" 1.5,
 "70" 2.8,
 "80" 4.5,
 "90" 6.6,
 "99" 9.1,
 "110" 12.1,
 "120"  15.5,
 "130"  19.3,
 "140"  23.4,
 "150"  27.6,
 "160"  31.9,
 "170"  36.2,
 "180"  40.4,
 "190"  44.5,
 "200"  48.4,
 "210"  52.1,
 "220"  55.6,
 "230"  59,
 "240"  62.2,
 "250"  65.2,
 "260"  68,
 "270"  70.6,
 "280"  73.1,
 "290"  75.4,
 "300"  77.6,
 "310"  79.6,
 "320"  81.5,
 "330"  83.3,
 "340"  84.9,
 "350"  86.4,
 "360"  87.8,
 "370"  89.1,
 "380"  90.3,
 "390"  91.4,
 "400"  92.4,
 "410"  93.3,
 "420"  94.1,
 "430"  94.8,
 "440"  95.5,
 "450"  96.1,
 "460"  96.6,
 "470"  97.1,
 "480"  97.5,
 "490"  97.9,
 "500"  98.2,
 "510"  98.5,
 "520"  98.7,
 "530"  98.9,
 "540"  99.1,
 "550"  99.2,
 "560"  99.3,
 "570"  99.4,
 "580"  99.5,
 "590"  99.5,
 "600"  99.6,
 "610"  99.6,
 "620"  99.7,
 "630"  99.7,
 "640"  99.8,
 "650"  99.8,
 "660"  99.9,
 "670"  99.9,
 "680"  99.9,
 "690"  99.9,
 "700"  100
  })

(defn population-speed-percentile 
  [cpm]
  (let [k (* 10 (int (/ cpm 10)))]
    (if (> k 700) 100
      (get population-speeds (str k)))))
